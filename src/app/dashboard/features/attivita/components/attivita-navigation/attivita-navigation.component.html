<div class="card mb-4 shadow" style="max-width: 800px; margin: 0 auto;">
    <div class="card-body commessa-resume">
        <div class="flexgrid flexgrid--3">

            <div>
                <div class="fw-bold">Codice commessa</div>
                <div>{{ commessa.codiceCommessa }}</div>
            </div>

            <div>
                <div class="fw-bold">Descrizione</div>
                <div>{{ commessa.descrizione }}</div>
            </div>

            <div>
                <div class="fw-bold">Tipo attività</div>
                <div>{{ commessa.tipoAttivita.id === 1 ? 'Opportunità' : 'Commessa interna' }}</div>
            </div>

            <div>
                <div class="fw-bold">Cliente</div>
                <div>{{ commessa.descrizioneCliente }}</div>
            </div>

            <div>
                <div class="fw-bold">Project manager</div>
                <div>{{ (commessa.cognomeProjectManager || '-') + ' ' + (commessa.nomeProjectManager || '-') }}</div>
            </div>

            <div>
                <div class="fw-bold">Business manager</div>
                <div>{{ (commessa.nomeBusinessManager || '-') + ' ' + (commessa.cognomeBusinessManager || '-') }}</div>
            </div>
        </div>
        <button
            type="button"
            class="btn btn-warning shadow"
            (click)="update()"
        >
            <i class="bi bi-pencil"></i>
        </button>
    </div>
</div>

<ul
    class="attivita-nav mb-5"
    ngbNav
    #nav="ngbNav"
    [destroyOnHide]="false"
    [(activeId)]="activeTabId"
>
	<li [ngbNavItem]="1" class="attivita-nav__item" [disabled]="commessa.tipoAttivita.id == 2">
        <a ngbNavLink>
            <i class="bi bi-1-square-fill"></i>
            Opportunità
        </a>
		<ng-template ngbNavContent>
			<app-opportunita></app-opportunita>
		</ng-template>
	</li>
	<li [ngbNavItem]="2" class="attivita-nav__item" [disabled]="commessa.tipoAttivita.id == 2">
        <a ngbNavLink>
            <i class="bi bi-2-square-fill"></i>
            Offerta
        </a>
		<ng-template ngbNavContent>
			<app-offerta></app-offerta>
		</ng-template>
	</li>
	<li [ngbNavItem]="3" class="attivita-nav__item" [disabled]="this.commessa.tipoAttivita.id == 1 && !this.offerta?.dataAccettazione">
        <a ngbNavLink>
            <i class="bi bi-3-square-fill"></i>
            Sottocommesse
        </a>
		<ng-template ngbNavContent>
			<app-sottocommesse></app-sottocommesse>
		</ng-template>
	</li>
	<li [ngbNavItem]="4" class="attivita-nav__item" [disabled]="!hasSottocommesse">
        <a ngbNavLink>
            <i class="bi bi-4-square-fill"></i>
            Costi
        </a>
		<ng-template ngbNavContent>
			<app-costi></app-costi>
		</ng-template>
	</li>
    <li [ngbNavItem]="5" class="attivita-nav__item" [disabled]="!hasSottocommesse">
        <a ngbNavLink>
            <i class="bi bi-5-square-fill"></i>
            Ricavi
        </a>
		<ng-template ngbNavContent>
			<app-ricavi></app-ricavi>
		</ng-template>
	</li>
    <li [ngbNavItem]="6" class="attivita-nav__item">
        <a ngbNavLink>
            <i class="bi bi-6-square-fill"></i>
            Ordini
        </a>
		<ng-template ngbNavContent>
			<app-ordini></app-ordini>
		</ng-template>
	</li>
    <li [ngbNavItem]="7" class="attivita-nav__item">
        <a ngbNavLink>
            <i class="bi bi-7-square-fill"></i>
            Fatture
        </a>
		<ng-template ngbNavContent>
			<app-fatture></app-fatture>
		</ng-template>
	</li>
</ul>

<div [ngbNavOutlet]="nav" class="mt-2"></div>
